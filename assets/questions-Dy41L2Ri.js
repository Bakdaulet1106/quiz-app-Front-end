import{z as V,r as c,c as l,m as k}from"./index-KNQVc3Tq.js";const f={async get(e){try{const t=await fetch(`http://localhost:3001${e}`);if(!t.ok)throw new Error("Network error");return{data:await t.json()}}catch{return console.warn("API недоступен, используется локальный режим"),{data:[]}}},async post(e,t){try{const o=await fetch(`http://localhost:3001${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Network error");return{data:await o.json()}}catch{return console.warn("API недоступен, используется локальный режим"),{data:{id:Date.now(),...t}}}},async put(e,t){try{const o=await fetch(`http://localhost:3001${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Network error");return{data:await o.json()}}catch{return console.warn("API недоступен, используется локальный режим"),{data:t}}},async delete(e){try{if(!(await fetch(`http://localhost:3001${e}`,{method:"DELETE"})).ok)throw new Error("Network error");return{data:{}}}catch{return console.warn("API недоступен, используется локальный режим"),{data:{}}}}},L=["Vue.js","JavaScript","HTML/CSS","React","Angular","Node.js","General Programming"],g=[{value:"easy",label:"Легкий",color:"#4ade80"},{value:"medium",label:"Средний",color:"#f59e0b"},{value:"hard",label:"Сложный",color:"#ef4444"}],O={QUESTIONS_PER_QUIZ:5},x=e=>{const t=[...e];for(let o=t.length-1;o>0;o--){const a=Math.floor(Math.random()*(o+1));[t[o],t[a]]=[t[a],t[o]]}return t},U=e=>{const t=g.find(o=>o.value===e);return t?t.color:"#6b7280"},z=e=>{const t=g.find(o=>o.value===e);return t?t.label:"Неизвестно"},D=(e,t)=>x(e).slice(0,t),m=[{id:1,question:"Что такое Vue.js?",options:["Фреймворк","Библиотека","Язык программирования","База данных"],correctAnswer:0,category:"Vue.js",difficulty:"easy",points:10},{id:2,question:"Какой метод используется для создания реактивных данных в Composition API?",options:["data()","ref()","computed()","watch()"],correctAnswer:1,category:"Vue.js",difficulty:"medium",points:15},{id:3,question:"Что такое Virtual DOM?",options:["Реальная DOM структура","Легковесная копия реальной DOM","База данных","Метод шифрования"],correctAnswer:1,category:"Vue.js",difficulty:"medium",points:15},{id:4,question:"Какой директивой осуществляется условный рендеринг в Vue?",options:["v-if","v-for","v-bind","v-model"],correctAnswer:0,category:"Vue.js",difficulty:"easy",points:10},{id:5,question:"Что возвращает функция computed?",options:["Сырое значение","Реактивную ссылку","Функцию","Оbject"],correctAnswer:1,category:"Vue.js",difficulty:"hard",points:20}],_=V("questions",()=>{const e=c([]),t=c(!1),o=c(0),a=c([]),d=c(!1),v=c(!1),u=l(()=>e.value.length),p=l(()=>e.value[o.value]),Q=l(()=>u.value>0?(o.value+1)/u.value*100:0),E=l(()=>{var r;return(r=a.value[o.value])==null?void 0:r.answerIndex}),w=l(()=>a.value.filter((r,s)=>{var n;return r.answerIndex===((n=e.value[s])==null?void 0:n.correctAnswer)}).length),A=l(()=>u.value>0?Math.round(w.value/u.value*100):0),h=async()=>{t.value=!0;try{const r=await f.get("/questions");e.value=r.data.length>0?r.data:m}catch(r){console.error("Error loading questions:",r),e.value=m}finally{t.value=!1}},S=(r=O.QUESTIONS_PER_QUIZ)=>{const s=D(e.value,r);e.value=s,a.value=[],o.value=0,d.value=!0,v.value=!1},j=r=>{a.value[o.value]={questionId:p.value.id,answerIndex:r,isCorrect:r===p.value.correctAnswer,timestamp:Date.now()}},I=()=>{o.value<u.value-1?o.value++:y()},b=()=>{o.value>0&&o.value--},y=()=>{v.value=!0,d.value=!1},T=()=>{e.value=[],a.value=[],o.value=0,d.value=!1,v.value=!1},q=async r=>{try{const s={id:Date.now(),...r};return await f.post("/questions",s),e.value.push(s),s}catch(s){console.error("Error adding question:",s);const n={id:Date.now(),...r};return e.value.push(n),n}},C=async(r,s)=>{try{await f.put(`/questions/${r}`,s);const n=e.value.findIndex(i=>i.id===r);n!==-1&&(e.value[n]={...e.value[n],...s})}catch(n){console.error("Error updating question:",n);const i=e.value.findIndex(P=>P.id===r);i!==-1&&(e.value[i]={...e.value[i],...s})}},N=async r=>{try{await f.delete(`/questions/${r}`),e.value=e.value.filter(s=>s.id!==r)}catch(s){console.error("Error deleting question:",s),e.value=e.value.filter(n=>n.id!==r)}};return k(()=>{h()}),{questions:e,isLoading:t,currentQuestionIndex:o,userAnswers:a,quizStarted:d,quizCompleted:v,totalQuestions:u,currentQuestion:p,progress:Q,selectedAnswer:E,correctAnswersCount:w,score:A,loadQuestions:h,startQuiz:S,submitAnswer:j,nextQuestion:I,previousQuestion:b,completeQuiz:y,resetQuiz:T,addQuestion:q,updateQuestion:C,deleteQuestion:N}});export{L as C,O as Q,z as a,D as b,U as g,_ as u};
