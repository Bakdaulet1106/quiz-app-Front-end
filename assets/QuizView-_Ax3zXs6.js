import{u as I,g as U,a as F}from"./questions-DO0x8Du6.js";import{z as E,r as $,c as w,_ as R,a as n,o as a,b as s,e as z,t as r,x as V,h as _,F as M,q as D,n as y,d as g,g as k,i as b,B as S,l as O,m as L,y as j,A as G,C as H}from"./index-CcFimEsF.js";const B=E("quiz",()=>{const u=$(0),o=$(null),e=$(!1),v=w(()=>{const h=Math.floor(u.value/60),Q=u.value%60;return`${h.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`}),p=w(()=>u.value<=0),c=h=>{u.value=h,e.value=!0,o.value=setInterval(()=>{u.value>0?u.value--:i()},1e3)},i=()=>{e.value=!1,o.value&&(clearInterval(o.value),o.value=null)};return{timeRemaining:u,isTimerRunning:e,formattedTime:v,isTimeUp:p,startTimer:c,stopTimer:i,resetTimer:()=>{i(),u.value=0}}}),J={class:"question-card"},K={class:"question-card__header"},W={class:"question-card__progress"},X={class:"question-card__points"},Y={class:"question-card__meta"},Z={class:"question-card__category"},ss={class:"question-card__content"},es={class:"question-card__question"},ts={class:"question-card__options"},is=["onClick"],os={class:"question-card__option-content"},rs={class:"question-card__option-letter"},ns={class:"question-card__option-text"},as={key:0,class:"question-card__option-feedback"},ls={key:0,class:"question-card__correct-mark"},us={key:1,class:"question-card__incorrect-mark"},_s={key:0,class:"question-card__navigation"},cs={key:1,class:"question-card__results"},ds={key:0,class:"question-card__result-icon"},vs={key:1,class:"question-card__result-icon"},ws={class:"question-card__result-text"},ps={__name:"QuestionCard",props:{showResults:{type:Boolean,default:!1}},setup(u){const o=I(),e=w(()=>o.currentQuestion),v=w(()=>o.currentQuestionIndex+1),p=w(()=>o.totalQuestions),c=w(()=>o.selectedAnswer),i=w(()=>v.value===p.value),d=w(()=>c.value===e.value.correctAnswer),h=C=>{o.submitAnswer(C)},Q=()=>{o.nextQuestion()},x=()=>{o.previousQuestion()};return(C,A)=>(a(),n("div",J,[s("div",K,[s("div",W," Вопрос "+r(v.value)+" из "+r(p.value),1),s("div",X,r(e.value.points)+" баллов ",1)]),s("div",Y,[s("span",Z,r(e.value.category),1),s("span",{class:"question-card__difficulty",style:V({color:_(U)(e.value.difficulty)})},r(_(F)(e.value.difficulty)),5)]),s("div",ss,[s("h2",es,r(e.value.question),1),s("div",ts,[(a(!0),n(M,null,D(e.value.options,(T,m)=>(a(),n("div",{key:m,class:y(["question-card__option",{"question-card__option--selected":c.value===m,"question-card__option--correct":u.showResults&&m===e.value.correctAnswer,"question-card__option--incorrect":u.showResults&&c.value===m&&c.value!==e.value.correctAnswer}]),onClick:N=>!u.showResults&&h(m)},[s("div",os,[s("span",rs,r(String.fromCharCode(65+m)),1),s("span",ns,r(T),1),u.showResults?(a(),n("div",as,[m===e.value.correctAnswer?(a(),n("span",ls," ✓ Правильный ответ ")):c.value===m&&c.value!==e.value.correctAnswer?(a(),n("span",us," ✗ Ваш ответ ")):z("",!0)])):z("",!0)])],10,is))),128))])]),u.showResults?z("",!0):(a(),n("div",_s,[g(S,{variant:"secondary",onClick:x,disabled:v.value===1},{default:k(()=>[...A[0]||(A[0]=[b(" ← Назад ",-1)])]),_:1},8,["disabled"]),g(S,{variant:"primary",onClick:Q,disabled:c.value===null},{default:k(()=>[b(r(i.value?"Завершить":"Далее →"),1)]),_:1},8,["disabled"])])),u.showResults?(a(),n("div",cs,[s("div",{class:y(["question-card__result-feedback",d.value?"question-card__result-feedback--correct":"question-card__result-feedback--incorrect"])},[d.value?(a(),n("span",ds,"✅")):(a(),n("span",vs,"❌")),s("span",ws,r(d.value?"Правильно!":"Неправильно!"),1)],2)])):z("",!0)]))}},qs=R(ps,[["__scopeId","data-v-fd8a8d79"]]),ms={class:"quiz-timer"},fs={class:"quiz-timer__svg",viewBox:"0 0 100 100"},gs=["stroke-dashoffset"],zs={class:"quiz-timer__content"},hs={class:"quiz-timer__time"},$s={key:0,class:"quiz-timer__warning"},ys={key:1,class:"quiz-timer__time-up"},ks={__name:"QuizTimer",setup(u){const o=B(),e=w(()=>o.timeRemaining);w(()=>o.isTimerRunning);const v=w(()=>{const i=Math.floor(e.value/60),d=e.value%60;return`${i.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`}),p=2*Math.PI*45,c=w(()=>{const i=(300-e.value)/300;return p*(1-i)});return(i,d)=>(a(),n("div",ms,[s("div",{class:y(["quiz-timer__circle",{"quiz-timer__circle--warning":e.value<=60,"quiz-timer__circle--danger":e.value<=30}])},[(a(),n("svg",fs,[d[0]||(d[0]=s("circle",{class:"quiz-timer__background",cx:"50",cy:"50",r:"45"},null,-1)),s("circle",{class:"quiz-timer__progress",cx:"50",cy:"50",r:"45","stroke-dasharray":p,"stroke-dashoffset":c.value},null,8,gs)])),s("div",zs,[s("div",hs,r(v.value),1),d[1]||(d[1]=s("div",{class:"quiz-timer__label"},"осталось",-1))])],2),e.value<=60&&e.value>0?(a(),n("div",$s," ⚠️ Время заканчивается! ")):z("",!0),e.value===0?(a(),n("div",ys," ⏰ Время вышло! ")):z("",!0)]))}},bs=R(ks,[["__scopeId","data-v-f7ab1614"]]),Ss={class:"results-view"},Qs={class:"results-view__container"},Cs={class:"results-view__header"},As={class:"results-view__score-value"},Ts={class:"results-view__stats"},Rs={class:"results-view__stat"},xs={class:"results-view__stat-info"},Is={class:"results-view__stat-value"},Vs={class:"results-view__stat"},Bs={class:"results-view__stat-info"},Ns={class:"results-view__stat-value"},Ms={class:"results-view__stat"},Ds={class:"results-view__stat-info"},Ls={class:"results-view__stat-value"},Ps={class:"results-view__stat"},Us={class:"results-view__stat-info"},Fs={class:"results-view__stat-value"},Es={class:"results-view__progress"},Os={class:"results-view__progress-info"},js={class:"results-view__progress-bar"},Gs={class:"results-view__details"},Hs={class:"results-view__questions"},Js={class:"results-view__question-header"},Ks={class:"results-view__question-number"},Ws={class:"results-view__question-text"},Xs={class:"results-view__answers"},Ys={class:"results-view__answer"},Zs={class:"results-view__answer-value"},se={key:0,class:"results-view__answer"},ee={class:"results-view__answer-value results-view__answer-value--correct"},te={class:"results-view__actions"},ie={key:0,class:"results-view__save-message"},oe={__name:"ResultsView",setup(u){const o=j(),e=I(),v=B(),p=O(),c=$(!1),i=$(""),d=$(0),h=l=>l>=80?"results-view__score--excellent":l>=60?"results-view__score--good":l>=40?"results-view__score--average":"results-view__score--poor",Q=l=>l>=80?"results-view__progress-fill--excellent":l>=60?"results-view__progress-fill--good":l>=40?"results-view__progress-fill--average":"results-view__progress-fill--poor",x=l=>{const t=Math.floor(l/60),q=l%60;return`${t.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},C=()=>e.userAnswers.reduce((l,t,q)=>{if(t.isCorrect){const f=e.questions[q];return l+((f==null?void 0:f.points)||0)}return l},0),A=l=>{var t;return((t=e.questions[l])==null?void 0:t.question)||"Вопрос не найден"},T=(l,t)=>{const q=e.questions[l];return!q||t===null||t===void 0?"Ответ не выбран":q.options[t]||"Вариант не найден"},m=l=>{var t;return(t=e.questions[l])==null?void 0:t.correctAnswer},N=()=>{e.resetQuiz(),v.resetTimer(),o.push("/student")},P=async()=>{c.value=!0,i.value="";try{const l={score:e.score,correctAnswers:e.correctAnswersCount,totalQuestions:e.totalQuestions,timeSpent:d.value,answers:e.userAnswers,questions:e.questions};await p.saveResult(l),i.value="✅ Результат успешно сохранен!"}catch{i.value="❌ Ошибка при сохранении результата"}finally{c.value=!1}};return L(()=>{d.value=300-v.timeRemaining}),(l,t)=>(a(),n("div",Ss,[s("div",Qs,[s("div",Cs,[t[1]||(t[1]=s("h1",{class:"results-view__title"},"Результаты квиза",-1)),s("div",{class:y(["results-view__score",h(_(e).score)])},[s("div",As,r(_(e).score)+"%",1),t[0]||(t[0]=s("div",{class:"results-view__score-label"},"Общий результат",-1))],2)]),s("div",Ts,[s("div",Rs,[t[3]||(t[3]=s("div",{class:"results-view__stat-icon"},"✅",-1)),s("div",xs,[s("div",Is,r(_(e).correctAnswersCount),1),t[2]||(t[2]=s("div",{class:"results-view__stat-label"},"Правильных ответов",-1))])]),s("div",Vs,[t[5]||(t[5]=s("div",{class:"results-view__stat-icon"},"📊",-1)),s("div",Bs,[s("div",Ns,r(_(e).totalQuestions),1),t[4]||(t[4]=s("div",{class:"results-view__stat-label"},"Всего вопросов",-1))])]),s("div",Ms,[t[7]||(t[7]=s("div",{class:"results-view__stat-icon"},"⏱️",-1)),s("div",Ds,[s("div",Ls,r(x(d.value)),1),t[6]||(t[6]=s("div",{class:"results-view__stat-label"},"Затраченное время",-1))])]),s("div",Ps,[t[9]||(t[9]=s("div",{class:"results-view__stat-icon"},"🎯",-1)),s("div",Us,[s("div",Fs,r(C()),1),t[8]||(t[8]=s("div",{class:"results-view__stat-label"},"Заработано баллов",-1))])])]),s("div",Es,[s("div",Os,[t[10]||(t[10]=s("span",null,"Прогресс выполнения",-1)),s("span",null,r(_(e).score)+"%",1)]),s("div",js,[s("div",{class:y(["results-view__progress-fill",Q(_(e).score)]),style:V({width:`${_(e).score}%`})},null,6)])]),s("div",Gs,[t[13]||(t[13]=s("h2",{class:"results-view__details-title"},"Детали ответов",-1)),s("div",Hs,[(a(!0),n(M,null,D(_(e).userAnswers,(q,f)=>(a(),n("div",{key:f,class:"results-view__question"},[s("div",Js,[s("span",Ks,"Вопрос "+r(f+1),1),s("span",{class:y(["results-view__question-status",q.isCorrect?"results-view__question-status--correct":"results-view__question-status--incorrect"])},r(q.isCorrect?"✅ Правильно":"❌ Неправильно"),3)]),s("div",Ws,r(A(f)),1),s("div",Xs,[s("div",Ys,[t[11]||(t[11]=s("span",{class:"results-view__answer-label"},"Ваш ответ:",-1)),s("span",Zs,r(T(f,q.answerIndex)),1)]),q.isCorrect?z("",!0):(a(),n("div",se,[t[12]||(t[12]=s("span",{class:"results-view__answer-label"},"Правильный ответ:",-1)),s("span",ee,r(T(f,m(f))),1)]))])]))),128))])]),s("div",te,[g(S,{variant:"primary",size:"large",onClick:N,class:"results-view__action-btn"},{default:k(()=>[...t[14]||(t[14]=[b(" 🎯 Новый квиз ",-1)])]),_:1}),g(S,{variant:"secondary",size:"large",onClick:P,loading:c.value,class:"results-view__action-btn"},{default:k(()=>[...t[15]||(t[15]=[b(" 💾 Сохранить результат ",-1)])]),_:1},8,["loading"])]),i.value?(a(),n("div",ie,r(i.value),1)):z("",!0)])]))}},re=R(oe,[["__scopeId","data-v-2ca2ccb7"]]),ne={class:"quiz-view"},ae={class:"container"},le={key:0,class:"quiz-view__active"},ue={class:"quiz-view__header"},_e={class:"quiz-view__quiz-info"},ce={class:"quiz-view__progress"},de={class:"quiz-view__progress-text"},ve={class:"quiz-view__progress-bar"},we={key:0,class:"quiz-view__time-up"},pe={class:"quiz-view__time-up-content"},qe={key:1,class:"quiz-view__completed"},me={key:2,class:"quiz-view__start"},fe={class:"quiz-view__start-content"},ge={class:"quiz-view__quiz-details"},ze={class:"quiz-view__detail"},he={class:"quiz-view__detail-text"},$e={__name:"QuizView",setup(u){const o=I(),e=B(),v=()=>{o.startQuiz(),e.startTimer(300)},p=()=>{o.completeQuiz(),e.stopTimer()};return L(()=>{o.questions.length===0&&console.log("No questions loaded")}),G(()=>{e.stopTimer()}),(c,i)=>(a(),n("div",ne,[s("div",ae,[_(o).quizStarted&&!_(o).quizCompleted?(a(),n("div",le,[s("div",ue,[s("div",_e,[i[0]||(i[0]=s("h1",{class:"quiz-view__title"},"Прохождение квиза",-1)),s("div",ce,[s("div",de," Вопрос "+r(_(o).currentQuestionIndex+1)+" из "+r(_(o).totalQuestions),1),s("div",ve,[s("div",{class:"quiz-view__progress-fill",style:V({width:`${_(o).progress}%`})},null,4)])])]),g(bs,{duration:300})]),g(qs),_(e).isTimeUp?(a(),n("div",we,[s("div",pe,[i[2]||(i[2]=s("h2",null,"⏰ Время вышло!",-1)),i[3]||(i[3]=s("p",null,"Квиз будет завершен автоматически",-1)),g(S,{variant:"primary",onClick:p},{default:k(()=>[...i[1]||(i[1]=[b(" Посмотреть результаты ",-1)])]),_:1})])])):z("",!0)])):_(o).quizCompleted?(a(),n("div",qe,[g(re)])):(a(),n("div",me,[s("div",fe,[i[7]||(i[7]=s("h1",{class:"quiz-view__start-title"},"Готовы начать?",-1)),s("div",ge,[s("div",ze,[i[4]||(i[4]=s("span",{class:"quiz-view__detail-icon"},"❓",-1)),s("span",he,r(_(o).questions.length)+" вопросов ",1)]),i[5]||(i[5]=H('<div class="quiz-view__detail" data-v-6117ce0b><span class="quiz-view__detail-icon" data-v-6117ce0b>⏱️</span><span class="quiz-view__detail-text" data-v-6117ce0b>5 минут</span></div><div class="quiz-view__detail" data-v-6117ce0b><span class="quiz-view__detail-icon" data-v-6117ce0b>🎯</span><span class="quiz-view__detail-text" data-v-6117ce0b>Случайная выборка вопросов</span></div>',2))]),i[8]||(i[8]=s("div",{class:"quiz-view__instructions"},[s("h3",null,"Инструкции:"),s("ul",null,[s("li",null,"📝 Выбирайте один правильный ответ из предложенных вариантов"),s("li",null,"⏱️ Следите за временем - на весь тест отводится 5 минут"),s("li",null,'↔️ Используйте кнопки "Назад" и "Далее" для навигации'),s("li",null,"✅ Результаты будут показаны сразу после завершения")])],-1)),g(S,{variant:"primary",size:"large",onClick:v,class:"quiz-view__start-button"},{default:k(()=>[...i[6]||(i[6]=[b(" 🚀 Начать квиз ",-1)])]),_:1})])]))])]))}},be=R($e,[["__scopeId","data-v-6117ce0b"]]);export{be as default};
