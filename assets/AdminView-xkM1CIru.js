import{_ as I,r as V,c as A,a as u,o as l,b as t,d as $,g as z,i as k,B as h,f as w,s as U,F as g,q as b,t as a,x as O,h as S,n as y,e as q,w as T,v as F,k as E,j as x,l as R}from"./index-KNQVc3Tq.js";import{u as L,g as j,a as M,C as G}from"./questions-Dy41L2Ri.js";const H={class:"question-list"},J={class:"question-list__header"},K={class:"question-list__content"},P={class:"question-list__filters"},W={class:"question-list__filter"},X=["value"],Y={class:"question-list__filter"},Z={class:"question-list__stats"},tt={class:"question-list__items"},st={class:"question-list__item-content"},et={class:"question-list__item-question"},it={class:"question-list__item-meta"},ot={class:"question-list__item-category"},nt={class:"question-list__item-points"},lt={class:"question-list__item-options"},at={class:"question-list__option-index"},ut={class:"question-list__option-text"},rt={key:0,class:"question-list__option-correct"},_t={class:"question-list__item-actions"},dt={__name:"QuestionList",emits:["add-question","edit-question"],setup(D,{emit:_}){const d=L(),m=V({category:"",difficulty:""}),p=A(()=>{const s=d.questions.map(e=>e.category);return[...new Set(s)].sort()}),i=A(()=>{let s=d.questions;return m.value.category&&(s=s.filter(e=>e.category===m.value.category)),m.value.difficulty&&(s=s.filter(e=>e.difficulty===m.value.difficulty)),s}),o=s=>{confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å?")&&(d.questions=d.questions.filter(e=>e.id!==s))};return(s,e)=>(l(),u("div",H,[t("div",J,[e[4]||(e[4]=t("h2",{class:"question-list__title"},"–ë–∞–Ω–∫ –≤–æ–ø—Ä–æ—Å–æ–≤",-1)),$(h,{variant:"primary",onClick:e[0]||(e[0]=r=>s.$emit("add-question")),class:"question-list__add-btn"},{default:z(()=>[...e[3]||(e[3]=[k(" ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å ",-1)])]),_:1})]),t("div",K,[t("div",P,[t("div",W,[e[6]||(e[6]=t("label",{for:"category",class:"question-list__filter-label"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è:",-1)),w(t("select",{id:"category","onUpdate:modelValue":e[1]||(e[1]=r=>m.value.category=r),class:"question-list__filter-select"},[e[5]||(e[5]=t("option",{value:""},"–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏",-1)),(l(!0),u(g,null,b(p.value,r=>(l(),u("option",{key:r,value:r},a(r),9,X))),128))],512),[[U,m.value.category]])]),t("div",Y,[e[8]||(e[8]=t("label",{for:"difficulty",class:"question-list__filter-label"},"–°–ª–æ–∂–Ω–æ—Å—Ç—å:",-1)),w(t("select",{id:"difficulty","onUpdate:modelValue":e[2]||(e[2]=r=>m.value.difficulty=r),class:"question-list__filter-select"},[...e[7]||(e[7]=[t("option",{value:""},"–í—Å–µ —É—Ä–æ–≤–Ω–∏",-1),t("option",{value:"easy"},"–õ–µ–≥–∫–∏–π",-1),t("option",{value:"medium"},"–°—Ä–µ–¥–Ω–∏–π",-1),t("option",{value:"hard"},"–°–ª–æ–∂–Ω—ã–π",-1)])],512),[[U,m.value.difficulty]])])]),t("div",Z," –í—Å–µ–≥–æ –≤–æ–ø—Ä–æ—Å–æ–≤: "+a(i.value.length),1),t("div",tt,[(l(!0),u(g,null,b(i.value,r=>(l(),u("div",{key:r.id,class:"question-list__item"},[t("div",st,[t("h3",et,a(r.question),1),t("div",it,[t("span",ot,a(r.category),1),t("span",{class:"question-list__item-difficulty",style:O({color:S(j)(r.difficulty)})},a(S(M)(r.difficulty)),5),t("span",nt,a(r.points)+" –±–∞–ª–ª–æ–≤",1)]),t("div",lt,[(l(!0),u(g,null,b(r.options,(Q,C)=>(l(),u("div",{key:C,class:y(["question-list__option",{"question-list__option--correct":C===r.correctAnswer}])},[t("span",at,a(String.fromCharCode(65+C)),1),t("span",ut,a(Q),1),C===r.correctAnswer?(l(),u("span",rt," ‚úì ")):q("",!0)],2))),128))])]),t("div",_t,[$(h,{variant:"secondary",size:"small",onClick:Q=>s.$emit("edit-question",r)},{default:z(()=>[...e[9]||(e[9]=[k(" ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ",-1)])]),_:1},8,["onClick"]),$(h,{variant:"danger",size:"small",onClick:Q=>o(r.id)},{default:z(()=>[...e[10]||(e[10]=[k(" üóëÔ∏è –£–¥–∞–ª–∏—Ç—å ",-1)])]),_:1},8,["onClick"])])]))),128))])])]))}},ct=I(dt,[["__scopeId","data-v-3fc60f57"]]),vt={class:"question-form"},mt={class:"question-form__title"},ft={class:"question-form__field"},qt={key:0,class:"question-form__error"},pt={class:"question-form__row"},yt={class:"question-form__field"},$t=["value"],gt={key:0,class:"question-form__error"},bt={class:"question-form__field"},wt={key:0,class:"question-form__error"},zt={class:"question-form__field"},kt={key:0,class:"question-form__error"},ht={class:"question-form__options"},Ct={class:"question-form__option-content"},St={class:"question-form__option-letter"},At=["onUpdate:modelValue","placeholder"],Qt={class:"question-form__field"},Vt={class:"question-form__correct-answers"},Dt=["onClick"],Ut={class:"question-form__correct-letter"},It={class:"question-form__correct-text"},Bt={key:0,class:"question-form__correct-check"},Ft={key:0,class:"question-form__error"},Et={class:"question-form__actions"},Lt={__name:"QuestionForm",props:{question:{type:Object,default:null}},emits:["submit","cancel"],setup(D,{emit:_}){const d=D,m=_,p=L(),i=V({question:"",category:"",difficulty:"",points:10,options:["",""],correctAnswer:null}),o=V({}),s=A(()=>!!d.question),e=A(()=>i.value.question&&i.value.category&&i.value.difficulty&&i.value.points>0&&i.value.options.length>=2&&i.value.options.every(c=>c.trim())&&i.value.correctAnswer!==null),r=()=>{i.value.options.length<6&&i.value.options.push("")},Q=c=>{i.value.options.length>2&&(i.value.options.splice(c,1),i.value.correctAnswer===c?i.value.correctAnswer=null:i.value.correctAnswer>c&&i.value.correctAnswer--)},C=()=>(o.value={},i.value.question.trim()||(o.value.question="–í–æ–ø—Ä–æ—Å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω"),i.value.category||(o.value.category="–ö–∞—Ç–µ–≥–æ—Ä–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞"),i.value.difficulty||(o.value.difficulty="–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞"),(!i.value.points||i.value.points<1)&&(o.value.points="–ë–∞–ª–ª—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –±–æ–ª—å—à–µ 0"),i.value.correctAnswer===null&&(o.value.correctAnswer="–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç"),Object.keys(o.value).length===0),N=()=>{if(C()){if(s.value){const c=p.questions.findIndex(n=>n.id===d.question.id);c!==-1&&(p.questions[c]={...d.question,...i.value})}else{const c={id:Date.now(),...i.value};p.questions.push(c)}m("submit")}};return T(()=>d.question,c=>{c&&(i.value={...c})},{immediate:!0}),(c,n)=>(l(),u("div",vt,[t("h2",mt,a(s.value?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å":"–î–æ–±–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å"),1),t("form",{onSubmit:x(N,["prevent"]),class:"question-form__form"},[t("div",ft,[n[5]||(n[5]=t("label",{for:"question",class:"question-form__label"},"–í–æ–ø—Ä–æ—Å *",-1)),w(t("textarea",{id:"question","onUpdate:modelValue":n[0]||(n[0]=v=>i.value.question=v),class:y(["question-form__textarea",{"question-form__textarea--error":o.value.question}]),placeholder:"–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞",rows:"3"},null,2),[[F,i.value.question]]),o.value.question?(l(),u("span",qt,a(o.value.question),1)):q("",!0)]),t("div",pt,[t("div",yt,[n[7]||(n[7]=t("label",{for:"category",class:"question-form__label"},"–ö–∞—Ç–µ–≥–æ—Ä–∏—è *",-1)),w(t("select",{id:"category","onUpdate:modelValue":n[1]||(n[1]=v=>i.value.category=v),class:y(["question-form__select",{"question-form__select--error":o.value.category}])},[n[6]||(n[6]=t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é",-1)),(l(!0),u(g,null,b(S(G),v=>(l(),u("option",{key:v,value:v},a(v),9,$t))),128))],2),[[U,i.value.category]]),o.value.category?(l(),u("span",gt,a(o.value.category),1)):q("",!0)]),t("div",bt,[n[9]||(n[9]=t("label",{for:"difficulty",class:"question-form__label"},"–°–ª–æ–∂–Ω–æ—Å—Ç—å *",-1)),w(t("select",{id:"difficulty","onUpdate:modelValue":n[2]||(n[2]=v=>i.value.difficulty=v),class:y(["question-form__select",{"question-form__select--error":o.value.difficulty}])},[...n[8]||(n[8]=[t("option",{value:""},"–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å",-1),t("option",{value:"easy"},"–õ–µ–≥–∫–∏–π",-1),t("option",{value:"medium"},"–°—Ä–µ–¥–Ω–∏–π",-1),t("option",{value:"hard"},"–°–ª–æ–∂–Ω—ã–π",-1)])],2),[[U,i.value.difficulty]]),o.value.difficulty?(l(),u("span",wt,a(o.value.difficulty),1)):q("",!0)]),t("div",zt,[n[10]||(n[10]=t("label",{for:"points",class:"question-form__label"},"–ë–∞–ª–ª—ã *",-1)),w(t("input",{id:"points","onUpdate:modelValue":n[3]||(n[3]=v=>i.value.points=v),type:"number",min:"1",max:"100",class:y(["question-form__input",{"question-form__input--error":o.value.points}]),placeholder:"10"},null,2),[[F,i.value.points,void 0,{number:!0}]]),o.value.points?(l(),u("span",kt,a(o.value.points),1)):q("",!0)])]),t("div",ht,[n[13]||(n[13]=t("h3",{class:"question-form__options-title"},"–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ *",-1)),(l(!0),u(g,null,b(i.value.options,(v,f)=>(l(),u("div",{key:f,class:"question-form__option"},[t("div",Ct,[t("span",St,a(String.fromCharCode(65+f)),1),w(t("input",{"onUpdate:modelValue":B=>i.value.options[f]=B,type:"text",class:"question-form__option-input",placeholder:`–í–∞—Ä–∏–∞–Ω—Ç ${String.fromCharCode(65+f)}`},null,8,At),[[F,i.value.options[f]]]),i.value.options.length>2?(l(),E(h,{key:0,variant:"danger",size:"small",onClick:B=>Q(f),class:"question-form__remove-option"},{default:z(()=>[...n[11]||(n[11]=[k(" ‚úï ",-1)])]),_:1},8,["onClick"])):q("",!0)])]))),128)),i.value.options.length<6?(l(),E(h,{key:0,variant:"secondary",size:"small",onClick:r,class:"question-form__add-option"},{default:z(()=>[...n[12]||(n[12]=[k(" ‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç ",-1)])]),_:1})):q("",!0)]),t("div",Qt,[n[14]||(n[14]=t("label",{class:"question-form__label"},"–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç *",-1)),t("div",Vt,[(l(!0),u(g,null,b(i.value.options,(v,f)=>(l(),u("div",{key:f,class:y(["question-form__correct-answer",{"question-form__correct-answer--selected":i.value.correctAnswer===f}]),onClick:B=>i.value.correctAnswer=f},[t("span",Ut,a(String.fromCharCode(65+f)),1),t("span",It,a(v||`–í–∞—Ä–∏–∞–Ω—Ç ${String.fromCharCode(65+f)}`),1),i.value.correctAnswer===f?(l(),u("span",Bt," ‚úì ")):q("",!0)],10,Dt))),128))]),o.value.correctAnswer?(l(),u("span",Ft,a(o.value.correctAnswer),1)):q("",!0)]),t("div",Et,[$(h,{type:"button",variant:"secondary",onClick:n[4]||(n[4]=v=>c.$emit("cancel"))},{default:z(()=>[...n[15]||(n[15]=[k(" –û—Ç–º–µ–Ω–∞ ",-1)])]),_:1}),$(h,{type:"submit",variant:"primary",disabled:!e.value},{default:z(()=>[k(a(s.value?"–û–±–Ω–æ–≤–∏—Ç—å":"–°–æ–∑–¥–∞—Ç—å"),1)]),_:1},8,["disabled"])])],32)]))}},Nt=I(Lt,[["__scopeId","data-v-3b91cf28"]]),Ot={class:"quiz-stats"},Tt={class:"quiz-stats__content"},xt={class:"quiz-stats__metrics"},Rt={class:"quiz-stats__metric"},jt={class:"quiz-stats__metric-info"},Mt={class:"quiz-stats__metric-value"},Gt={class:"quiz-stats__metric"},Ht={class:"quiz-stats__metric-info"},Jt={class:"quiz-stats__metric-value"},Kt={class:"quiz-stats__metric"},Pt={class:"quiz-stats__metric-info"},Wt={class:"quiz-stats__metric-value"},Xt={class:"quiz-stats__metric"},Yt={class:"quiz-stats__metric-info"},Zt={class:"quiz-stats__metric-value"},ts={class:"quiz-stats__section"},ss={class:"quiz-stats__recent-results"},es={class:"quiz-stats__result-user"},is={class:"quiz-stats__result-score"},os={class:"quiz-stats__result-details"},ns={class:"quiz-stats__result-time"},ls={__name:"QuizStats",setup(D){const _=R(),d=A(()=>new Set(_.results.map(s=>s.userId)).size),m=A(()=>_.results.sort((o,s)=>new Date(s.completedAt)-new Date(o.completedAt)).slice(0,10)),p=o=>o>=80?"quiz-stats__score-badge--excellent":o>=60?"quiz-stats__score-badge--good":o>=40?"quiz-stats__score-badge--average":"quiz-stats__score-badge--poor",i=o=>new Date(o).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"});return(o,s)=>(l(),u("div",Ot,[s[9]||(s[9]=t("h2",{class:"quiz-stats__title"},"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–≤–∏–∑–æ–≤",-1)),t("div",Tt,[t("div",xt,[t("div",Rt,[s[1]||(s[1]=t("div",{class:"quiz-stats__metric-icon"},"üìä",-1)),t("div",jt,[t("div",Mt,a(S(_).results.length),1),s[0]||(s[0]=t("div",{class:"quiz-stats__metric-label"},"–í—Å–µ–≥–æ –ø—Ä–æ–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤",-1))])]),t("div",Gt,[s[3]||(s[3]=t("div",{class:"quiz-stats__metric-icon"},"üë•",-1)),t("div",Ht,[t("div",Jt,a(d.value),1),s[2]||(s[2]=t("div",{class:"quiz-stats__metric-label"},"–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π",-1))])]),t("div",Kt,[s[5]||(s[5]=t("div",{class:"quiz-stats__metric-icon"},"‚≠ê",-1)),t("div",Pt,[t("div",Wt,a(S(_).averageScore)+"%",1),s[4]||(s[4]=t("div",{class:"quiz-stats__metric-label"},"–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",-1))])]),t("div",Xt,[s[7]||(s[7]=t("div",{class:"quiz-stats__metric-icon"},"üéØ",-1)),t("div",Yt,[t("div",Zt,a(S(_).bestScore)+"%",1),s[6]||(s[6]=t("div",{class:"quiz-stats__metric-label"},"–õ—É—á—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",-1))])])]),t("div",ts,[s[8]||(s[8]=t("h3",{class:"quiz-stats__section-title"},"–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã",-1)),t("div",ss,[(l(!0),u(g,null,b(m.value,e=>(l(),u("div",{key:e.id,class:"quiz-stats__result"},[t("div",es,[t("strong",null,a(e.userName),1)]),t("div",is,[t("span",{class:y(["quiz-stats__score-badge",p(e.score)])},a(e.score)+"% ",3)]),t("div",os,a(e.correctAnswers)+"/"+a(e.totalQuestions)+" –≤–æ–ø—Ä–æ—Å–æ–≤ ",1),t("div",ns,a(i(e.completedAt)),1)]))),128))])])])]))}},as=I(ls,[["__scopeId","data-v-eb7aab94"]]),us={class:"admin-view"},rs={class:"container"},_s={class:"admin-view__tabs"},ds=["onClick"],cs={class:"admin-view__tab-icon"},vs={class:"admin-view__tab-text"},ms={class:"admin-view__content"},fs={key:0,class:"admin-view__tab-content"},qs={key:1,class:"admin-view__tab-content"},ps={key:2,class:"admin-view__tab-content"},ys={__name:"AdminView",setup(D){const _=V("questions"),d=V(null),m=[{id:"questions",name:"–í–æ–ø—Ä–æ—Å—ã",icon:"‚ùì"},{id:"stats",name:"–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",icon:"üìä"}],p=o=>{d.value=o,_.value="question-form"},i=()=>{_.value="questions",d.value=null};return(o,s)=>(l(),u("div",us,[t("div",rs,[s[3]||(s[3]=t("div",{class:"admin-view__header"},[t("h1",{class:"admin-view__title"},"–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞"),t("p",{class:"admin-view__subtitle"}," –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞–º–∏ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ ")],-1)),t("div",_s,[(l(),u(g,null,b(m,e=>t("button",{key:e.id,class:y(["admin-view__tab",{"admin-view__tab--active":_.value===e.id}]),onClick:r=>_.value=e.id},[t("span",cs,a(e.icon),1),t("span",vs,a(e.name),1)],10,ds)),64))]),t("div",ms,[_.value==="questions"?(l(),u("div",fs,[$(ct,{onAddQuestion:s[0]||(s[0]=e=>p(null)),onEditQuestion:s[1]||(s[1]=e=>p(e))})])):q("",!0),_.value==="question-form"?(l(),u("div",qs,[$(Nt,{question:d.value,onSubmit:i,onCancel:s[2]||(s[2]=e=>_.value="questions")},null,8,["question"])])):q("",!0),_.value==="stats"?(l(),u("div",ps,[$(as)])):q("",!0)])])]))}},bs=I(ys,[["__scopeId","data-v-dbe0dbf4"]]);export{bs as default};
